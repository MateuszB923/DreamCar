<!doctype html>
<html lang="pl">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>DreamCar • Admin</title>

    <link rel="stylesheet" href="/css/font.css">
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/footer.css">
    <link rel="stylesheet" href="/css/admin.css">
</head>

<body>

<nav class="display-menu">
    <a href="/index.html">MENU</a>
    <a href="/html/offer.html">OFERTA</a>
    <a href="/html/about_us.html">O NAS</a>
    <a href="/html/contact.html">KONTAKT</a>
    <a class="active" href="/html/admin.html">ADMIN</a>
</nav>

<div class="desktop-only">
    <h2>Panel admina jest dostępny tylko na komputerze</h2>
    <p>Otwórz stronę na desktopie (min. 1000px szerokości).</p>
</div>

<main class="admin-main">
    <div class="admin-container">

        <div id="admin-status" class="status info">Panel admina</div>

        <section id="admin-auth" class="card">
            <h1 class="admin-title">Logowanie admina</h1>

            <form id="login-form" class="form">
                <label>
                    Email
                    <input id="login-email" type="email" placeholder="adres e-mail" required>
                </label>

                <label>
                    Hasło
                    <input id="login-password" type="password" placeholder="••••••••" required>
                </label>

                <button type="submit" class="btn primary">Zaloguj</button>
            </form>
        </section>

        <section id="admin-panel" style="display:none;">
            <div class="admin-header">
                <h1 class="admin-title">Zarządzanie autami</h1>
                <button id="btn-logout" class="btn danger">Wyloguj</button>
            </div>

            <div class="grid">
                <section class="card">
                    <h2 class="card-title">Lista aut</h2>

                    <div class="table-wrap">
                        <table id="cars-table" class="table">
                            <thead>
                            <tr>
                                <th>ID</th>
                                <th>Auto</th>
                                <th>Rok</th>
                                <th>Cena / dzień</th>
                                <th>Dostępne</th>
                                <th>Akcje</th>
                            </tr>
                            </thead>
                            <tbody id="cars-tbody">
                            <tr><td colspan="6">Ładowanie...</td></tr>
                            </tbody>
                        </table>
                    </div>
                </section>

                <section class="card">
                    <h2 id="form-title" class="card-title">Dodaj auto</h2>

                    <form id="car-form" class="form">
                        <div class="form-row">
                            <label>
                                Marka
                                <input id="f-brand" type="text" maxlength="50" required>
                            </label>
                            <label>
                                Model
                                <input id="f-model" type="text" maxlength="80" required>
                            </label>
                        </div>
                        <div class="form-row">
                            <label>
                                Rok
                                <input id="f-year" type="number" min="1886" max="2030" required>
                            </label>
                            <label>
                                Cena / dzień (PLN)
                                <input id="f-price" type="number" step="10.0" min="10.0" required>
                            </label>
                        </div>
                        <label>
                            URL zdjęcia
                            <input id="f-imageUrl" type="text" required>
                        </label>
                        <label class="check">
                            <input id="f-available" type="checkbox" checked>
                            Dostępne
                        </label>
                        <hr class="sep">
                        <h3 class="sub-title">Specyfikacja</h3>
                        <div class="form-row">
                            <label>
                                0–100 (s)
                                <input id="f-0100" type="number" step="0.1" min="0.1">
                            </label>
                            <label>
                                Vmax (km/h)
                                <input id="f-top" type="number" min="1">
                            </label>
                        </div>
                        <div class="form-row">
                            <label>
                                Moc (HP)
                                <input id="f-hp" type="number" min="1">
                            </label>
                            <label>
                                Napęd
                                <select id="f-drive" required>
                                    <option value="">-- wybierz --</option>
                                    <option value="RWD">RWD</option>
                                    <option value="FWD">FWD</option>
                                    <option value="AWD">AWD</option>
                                </select>
                            </label>
                        </div>
                        <label>
                            Silnik
                            <input id="f-engine" type="text" required>
                        </label>
                        <div class="form-row">
                            <label>
                                Przebieg (km)
                                <input id="f-mileage" type="number" min="0">
                            </label>
                            <label>
                                Spalanie (l/100)
                                <input id="f-fuel" type="number" step="0.1" min="0.1">
                            </label>
                        </div>
                        <hr class="sep">
                        <label>
                            Tytuł
                            <input id="f-title" type="text" maxlength="120" required>
                        </label>
                        <label>
                            Opis
                            <textarea id="f-desc" rows="5" required></textarea>
                        </label>
                        <div class="actions">
                            <button id="btn-save" type="submit" class="btn primary">Dodaj</button>
                            <button id="btn-cancel" class="btn" style="display:none;">Anuluj</button>
                        </div>
                    </form>
                </section>

                <div class="card" id="reviews-card" style="display:none;">
                    <h2 id="reviews-title">OPINIE</h2>

                    <table class="table" id="reviews-table">
                        <thead>
                        <tr>
                            <th>ID</th>
                            <th>Autor</th>
                            <th>Opinia</th>
                            <th>Akcje</th>
                        </tr>
                        </thead>
                        <tbody id="reviews-tbody">
                        <tr><td colspan="4">Wybierz auto (Edytuj), aby zobaczyć opinie.</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <section class="card" id="users-card">
                <div style="display:flex; align-items:center; justify-content:space-between; gap:1rem;">
                    <h2 class="card-title" style="margin:0;">Użytkownicy</h2>
                    <button id="btn-users-refresh" class="btn">Odśwież</button>
                </div>

                <div class="table-wrap" style="margin-top: 0.8rem;">
                    <table class="table" id="users-table">
                        <thead>
                        <tr>
                            <th>ID</th>
                            <th>Email</th>
                            <th>Rola</th>
                            <th>Status</th>
                            <th>Akcje</th>
                        </tr>
                        </thead>
                        <tbody id="users-tbody">
                        <tr><td colspan="5">Ładowanie...</td></tr>
                        </tbody>
                    </table>
                </div>
            </section>

            <section class="card" id="messages-card" style="display:none;">
                <div style="display:flex; align-items:center; justify-content:space-between; gap:1rem;">
                    <h2 class="card-title" style="margin:0;">Wiadomości</h2>
                    <div style="display:flex; gap:0.6rem; align-items:center;">
                        <select id="msg-status" style="min-width: 180px;">
                            <option value="">WSZYSTKIE</option>
                            <option value="NEW">NOWE</option>
                            <option value="READ">PRZECZYTANE</option>
                            <option value="ARCHIVED">ZARCHIWIZOWANE</option>
                        </select>
                        <button id="btn-messages-refresh" class="btn">Odśwież</button>
                    </div>
                </div>

                <div class="table-wrap" style="margin-top:0.8rem;">
                    <table class="table" id="messages-table">
                        <thead>
                        <tr>
                            <th>ID</th>
                            <th>Data</th>
                            <th>User</th>
                            <th>Temat</th>
                            <th>Kategoria</th>
                            <th>Status</th>
                            <th>Akcje</th>
                        </tr>
                        </thead>
                        <tbody id="messages-tbody">
                        </tbody>
                    </table>
                </div>
            </section>

        </section>
    </div>
</main>

<div id="msg-modal" class="modal" style="display:none;">
    <div class="modal-backdrop" data-close="1"></div>

    <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="msg-modal-title">
        <div class="modal-header">
            <h2 id="msg-modal-title" class="modal-title">Wiadomość</h2>
            <button id="msg-modal-close" class="btn danger" type="button">Zamknij</button>
        </div>

        <div class="modal-meta">
            <div><span class="muted">Data:</span> <span id="m-created"></span></div>
            <div><span class="muted">Od:</span> <span id="m-from"></span></div>
            <div><span class="muted">Użytkownik:</span> <span id="m-user"></span></div>
            <div><span class="muted">Kategoria:</span> <span id="m-cat"></span></div>
            <div><span class="muted">Temat:</span> <span id="m-subject"></span></div>
            <div><span class="muted">Status:</span> <span id="m-status"></span></div>
        </div>

        <div class="modal-body">
            <pre id="m-message" class="modal-message"></pre>
        </div>

        <div class="modal-actions">
            <button id="m-btn-read" class="btn primary" type="button">Oznacz jako przeczytane</button>
            <button id="m-btn-arch" class="btn danger" type="button">Archiwizuj</button>
        </div>
    </div>
</div>

<footer class="footer">
    <div class="footer-bottom">DreamCar • Admin</div>
</footer>

<script src="/js/api.js"></script>
<script src="/js/auth.js"></script>
<script src="/js/adminCars.js"></script>
<script src="/js/adminReviews.js"></script>
<script src="/js/adminUsers.js"></script>
<script src="/js/adminMessages.js"></script>
</body>
</html>
